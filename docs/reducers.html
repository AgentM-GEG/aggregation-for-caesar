
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Reducers &#8212; panoptes_aggregation 0.1 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Extractors" href="extractros.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="extractros.html" title="Extractors"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">panoptes_aggregation 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Reducers</a><ul>
<li><a class="reference internal" href="#question-reducer">Question Reducer</a></li>
<li><a class="reference internal" href="#point-reducer">Point Reducer</a></li>
<li><a class="reference internal" href="#point-reducer-hdbscan">Point Reducer HDBSCAN</a></li>
<li><a class="reference internal" href="#rectangle-reducer">Rectangle Reducer</a></li>
<li><a class="reference internal" href="#survey-reducer">Survey Reducer</a></li>
<li><a class="reference internal" href="#polygon-as-line-tool-for-text-reducer">Polygon As Line Tool for Text Reducer</a></li>
<li><a class="reference internal" href="#shakespeares-world-variants-reducer">Shakespeares World Variants Reducer</a></li>
<li><a class="reference internal" href="#dropdown-reducer">Dropdown Reducer</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="extractros.html"
                        title="previous chapter">Extractors</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/reducers.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-panoptes_aggregation.reducers.question_reducer">
<span id="reducers"></span><h1>Reducers<a class="headerlink" href="#module-panoptes_aggregation.reducers.question_reducer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="question-reducer">
<h2>Question Reducer<a class="headerlink" href="#question-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module porvides functions to reduce the question task extracts from
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.question_extractor" title="panoptes_aggregation.extractors.question_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.question_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.question_reducer.process_data">
<code class="descclassname">panoptes_aggregation.reducers.question_reducer.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data</em>, <em>pairs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.question_reducer.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extracted questions into <cite>Counter</cite> objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>list</em>) – A list of extractions created by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.question_extractor.question_extractor" title="panoptes_aggregation.extractors.question_extractor.question_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.question_extractor.question_extractor()</span></code></a></li>
<li><strong>pairs</strong> (<em>bool, optional</em>) – Default <cite>False</cite>. How multiple choice questions are treated.
When <cite>True</cite> the set of all choices is treated as a single answer</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>processed_data</strong> – A list of <cite>Counter</cite> objects, one for each extraction</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.question_reducer.question_reducer">
<code class="descclassname">panoptes_aggregation.reducers.question_reducer.</code><code class="descname">question_reducer</code><span class="sig-paren">(</span><em>votes_list</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.question_reducer.question_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce a list of <cite>Counter</cite> objects into a single dict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>votes_list</strong> (<em>list</em>) – A list of <cite>Counter</cite> objects from <a class="reference internal" href="#panoptes_aggregation.reducers.question_reducer.process_data" title="panoptes_aggregation.reducers.question_reducer.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>reduction</strong> – A dictionary (formated as a <cite>Counter</cite>) giving the vote count for each
<cite>key</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.point_reducer"></span><div class="section" id="point-reducer">
<h2>Point Reducer<a class="headerlink" href="#point-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to cluster points extracted with
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.point_extractor" title="panoptes_aggregation.extractors.point_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.point_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.point_reducer.point_reducer">
<code class="descclassname">panoptes_aggregation.reducers.point_reducer.</code><code class="descname">point_reducer</code><span class="sig-paren">(</span><em>data_by_tool</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.point_reducer.point_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster a list of points by tool using DBSCAN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_by_tool</strong> (<em>dict</em>) – A dictionary returned by <a class="reference internal" href="#panoptes_aggregation.reducers.point_reducer.process_data" title="panoptes_aggregation.reducers.point_reducer.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></li>
<li><strong>kwrgs</strong> – <a class="reference external" href="http://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html">See DBSCAN</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>reduction</strong> – A dictinary with the following keys</p>
<ul class="simple">
<li><cite>tool*_points_x</cite> : A list of <cite>x</cite> positions for <strong>all</strong> points drawn with <cite>tool*</cite></li>
<li><cite>tool*_points_y</cite> : A list of <cite>y</cite> positions for <strong>all</strong> points drawn with <cite>tool*</cite></li>
<li><cite>tool*_cluster_labels</cite> : A list of cluster labels for <strong>all</strong> points drawn with <cite>tool*</cite></li>
<li><cite>tool*_clusters_count</cite> : The number of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_x</cite> : The <cite>x</cite> position for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_y</cite> : The <cite>y</cite> position for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_var_x</cite> : The <cite>x</cite> varaince of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_var_y</cite> : The <cite>y</cite> varaince of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_var_x_y</cite> : The <cite>x-y</cite> covaraince of points in each <strong>cluster</strong> found</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.point_reducer.process_data">
<code class="descclassname">panoptes_aggregation.reducers.point_reducer.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.point_reducer.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extractions into lists of <cite>x</cite> and <cite>y</cite> sorted by <cite>tool</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>list</em>) – A list of extractions crated by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.point_extractor.point_extractor" title="panoptes_aggregation.extractors.point_extractor.point_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.point_extractor.point_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>processed_data</strong> – A dictionary with each key being a <cite>tool</cite> with a list of (<cite>x</cite>, <cite>y</cite>)
tuples as a vlaue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.point_reducer_hdbscan"></span><div class="section" id="point-reducer-hdbscan">
<h2>Point Reducer HDBSCAN<a class="headerlink" href="#point-reducer-hdbscan" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to cluster points extracted with
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.point_extractor" title="panoptes_aggregation.extractors.point_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.point_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.point_reducer_hdbscan.point_reducer_hdbscan">
<code class="descclassname">panoptes_aggregation.reducers.point_reducer_hdbscan.</code><code class="descname">point_reducer_hdbscan</code><span class="sig-paren">(</span><em>data_by_tool</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.point_reducer_hdbscan.point_reducer_hdbscan" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster a list of points by tool using HDBSCAN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_by_tool</strong> (<em>dict</em>) – A dictionary returned by <a class="reference internal" href="#panoptes_aggregation.reducers.point_reducer_hdbscan.process_data" title="panoptes_aggregation.reducers.point_reducer_hdbscan.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></li>
<li><strong>kwrgs</strong> – <a class="reference external" href="http://hdbscan.readthedocs.io/en/latest/api.html#hdbscan">See HDBSCAN</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>reduction</strong> – A dictinary with the following keys</p>
<ul class="simple">
<li><cite>tool*_points_x</cite> : A list of <cite>x</cite> positions for <strong>all</strong> points drawn with <cite>tool*</cite></li>
<li><cite>tool*_points_y</cite> : A list of <cite>y</cite> positions for <strong>all</strong> points drawn with <cite>tool*</cite></li>
<li><cite>tool*_cluster_labels</cite> : A list of cluster labels for <strong>all</strong> points drawn with <cite>tool*</cite></li>
<li><cite>tool*_clusters_count</cite> : The number of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_x</cite> : The <cite>x</cite> position for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_y</cite> : The <cite>y</cite> position for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_var_x</cite> : The <cite>x</cite> varaince of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_var_y</cite> : The <cite>y</cite> varaince of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_var_x_y</cite> : The <cite>x-y</cite> covaraince of points in each <strong>cluster</strong> found</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.point_reducer_hdbscan.process_data">
<code class="descclassname">panoptes_aggregation.reducers.point_reducer_hdbscan.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.point_reducer_hdbscan.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extractions into lists of <cite>x</cite> and <cite>y</cite> sorted by <cite>tool</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>list</em>) – A list of extractions crated by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.point_extractor.point_extractor" title="panoptes_aggregation.extractors.point_extractor.point_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.point_extractor.point_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>processed_data</strong> – A dictionary with each key being a <cite>tool</cite> with a list of (<cite>x</cite>, <cite>y</cite>)
tuples as a vlaue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.rectangle_reducer"></span><div class="section" id="rectangle-reducer">
<h2>Rectangle Reducer<a class="headerlink" href="#rectangle-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to cluster rectangles extracted with
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.rectangle_extractor" title="panoptes_aggregation.extractors.rectangle_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.rectangle_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.rectangle_reducer.process_data">
<code class="descclassname">panoptes_aggregation.reducers.rectangle_reducer.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.rectangle_reducer.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extractions into lists of <cite>x</cite> and <cite>y</cite> sorted by <cite>frame</cite>
and <cite>tool</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>list</em>) – A list of extractions crated by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.rectangle_extractor.rectangle_extractor" title="panoptes_aggregation.extractors.rectangle_extractor.rectangle_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.rectangle_extractor.rectangle_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>processed_data</strong> – A dictionary with each key being a <cite>frame</cite> dictionary values with keys being
<cite>tool</cite> with a list of (<cite>x</cite>, <cite>y</cite>, <cite>width</cite>, <cite>height</cite>) tuples as a vlaue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.rectangle_reducer.rectangle_reducer">
<code class="descclassname">panoptes_aggregation.reducers.rectangle_reducer.</code><code class="descname">rectangle_reducer</code><span class="sig-paren">(</span><em>data_by_tool</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.rectangle_reducer.rectangle_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster a list of rectangles by tool and frame</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_by_tool</strong> (<em>dict</em>) – A dictionary returned by <a class="reference internal" href="#panoptes_aggregation.reducers.rectangle_reducer.process_data" title="panoptes_aggregation.reducers.rectangle_reducer.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></li>
<li><strong>kwrgs</strong> – <a class="reference external" href="http://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html">See DBSCAN</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>reduction</strong> – A dictinary with the following keys for each frame</p>
<ul class="simple">
<li><cite>tool*_rec_x</cite> : A list of <cite>x</cite> positions for <strong>all</strong> rectangles drawn with <cite>tool*</cite></li>
<li><cite>tool*_rec_y</cite> : A list of <cite>y</cite> positions for <strong>all</strong> rectangles drawn with <cite>tool*</cite></li>
<li><cite>tool*_rec_width</cite> : A list of <cite>width</cite> values for <strong>all</strong> rectangles drawn with <cite>tool*</cite></li>
<li><cite>tool*_rec_height</cite> : A list of <cite>height</cite> values for <strong>all</strong> rectangles drawn with <cite>tool*</cite></li>
<li><cite>tool*_cluster_labels</cite> : A list of cluster labels for <strong>all</strong> rectangles drawn with <cite>tool*</cite></li>
<li><cite>tool*_clusters_count</cite> : The number of points in each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_x</cite> : The <cite>x</cite> position for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_y</cite> : The <cite>y</cite> position for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_width</cite> : The <cite>widht</cite> value for each <strong>cluster</strong> found</li>
<li><cite>tool*_clusters_height</cite> : The <cite>height</cite> value for each <strong>cluster</strong> found</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.survey_reducer"></span><div class="section" id="survey-reducer">
<h2>Survey Reducer<a class="headerlink" href="#survey-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to reduce survey task extracts from
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.survey_extractor" title="panoptes_aggregation.extractors.survey_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.survey_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.survey_reducer.process_data">
<code class="descclassname">panoptes_aggregation.reducers.survey_reducer.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.survey_reducer.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extracted survey data into a dictionary of sub-question
answers sorted organized by <cite>choice</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>list</em>) – A list of extractions created by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.survey_extractor.survey_extractor" title="panoptes_aggregation.extractors.survey_extractor.survey_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.survey_extractor.survey_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>processed_data</strong> – A dictionary where the keys are the <cite>choice</cite> made and the values are a list
of dicts containing <cite>Counters</cite> for each sub-question asked.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.survey_reducer.survey_reducer">
<code class="descclassname">panoptes_aggregation.reducers.survey_reducer.</code><code class="descname">survey_reducer</code><span class="sig-paren">(</span><em>data_in</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.survey_reducer.survey_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce the survey task answers as a list of dicts (one for each <cite>choice</cite> marked)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_in</strong> (<em>dict</em>) – A dictionary created by <a class="reference internal" href="#panoptes_aggregation.reducers.survey_reducer.process_data" title="panoptes_aggregation.reducers.survey_reducer.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>reduction</strong> – A list that has one element for <cite>choice</cite> marked.  Each element is a dict of the form<ul class="simple">
<li><cite>choice</cite> : The choice made</li>
<li><cite>total_vote_count</cite> : The number of users that classified the subject</li>
<li><cite>choice_count</cite> : The number of users that made this <cite>choice</cite></li>
<li><cite>answers_*</cite> : Counters for each answer to sub-question <cite>*</cite></li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.poly_line_text_reducer"></span><div class="section" id="polygon-as-line-tool-for-text-reducer">
<h2>Polygon As Line Tool for Text Reducer<a class="headerlink" href="#polygon-as-line-tool-for-text-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module provides functions to reduce the polygon-text extractions from
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.poly_line_text_extractor" title="panoptes_aggregation.extractors.poly_line_text_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.poly_line_text_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.poly_line_text_reducer.poly_line_text_reducer">
<code class="descclassname">panoptes_aggregation.reducers.poly_line_text_reducer.</code><code class="descname">poly_line_text_reducer</code><span class="sig-paren">(</span><em>data_by_frame</em>, <em>**kwargs_dbscan</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.poly_line_text_reducer.poly_line_text_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce the polygon-text answers as a list of lines of text.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_by_frame</strong> (<em>dict</em>) – A dictionary returned by <a class="reference internal" href="#panoptes_aggregation.reducers.poly_line_text_reducer.process_data" title="panoptes_aggregation.reducers.poly_line_text_reducer.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></li>
<li><strong>kwargs</strong> – <a class="reference external" href="http://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html">See DBSCAN</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>reduction</strong> – A dictionary with on key for each <cite>frame</cite> of the subject that have lists as values.
Each item of the list represents one line transcribed of text and is a dictionary
with three keys:</p>
<ul class="simple">
<li><cite>clusters_x</cite> : the <cite>x</cite> position of each identified word</li>
<li><cite>clusters_y</cite> : the <cite>y</cite> position of each identified word</li>
<li><cite>clusters_text</cite> : A list of text at each cluster position</li>
<li><cite>gutter_label</cite> : A label indicating what “gutter” cluster the line is from</li>
<li><cite>line_slope</cite>: The slope of the line of text in degrees</li>
<li><cite>slope_label</cite> : A label indicating what slope cluster the line is from</li>
<li><cite>number_views</cite> : The number of users that transcribed the line of text</li>
<li><dl class="first docutils">
<dt><cite>consensus_score</cite> <span class="classifier-delimiter">:</span> <span class="classifier">The average number of users who’s text agreed for the line</span></dt>
<dd>Note, if <cite>consensus_score</cite> is the same a <cite>number_views</cite> every user agreed with each other</dd>
</dl>
</li>
</ul>
<p>Note: the image coordiate system is left handed with y increasing downward.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.poly_line_text_reducer.process_data">
<code class="descclassname">panoptes_aggregation.reducers.poly_line_text_reducer.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data_list</em>, <em>process_by_line=False</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.poly_line_text_reducer.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extractions into a dictionary of <cite>loc</cite> and <cite>text</cite>
organized by <cite>frame</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_list</strong> (<em>list</em>) – A list of extractions created by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.poly_line_text_extractor.poly_line_text_extractor" title="panoptes_aggregation.extractors.poly_line_text_extractor.poly_line_text_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.poly_line_text_extractor.poly_line_text_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>processed_data</strong> – A dictionary with keys for each <cite>frame</cite> of the subject and values being dictionaries
with <cite>x</cite>, <cite>y</cite>, <cite>text</cite>, and <cite>slope</cite> keys. <cite>x</cite>, <cite>y</cite>, and <cite>text</cite> are list-of-lists, each inner
list is from a single annotaiton, <cite>slope</cite> is the list of slopes (in deg) for each of these
inner lists.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.text_utils"></span><dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.align_words">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">align_words</code><span class="sig-paren">(</span><em>word_line</em>, <em>xy_line</em>, <em>text_line</em>, <em>kwargs_cluster</em>, <em>kwargs_dbscan</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.align_words" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to take the annotations for one line of text, aligns the words,
and finds the end-points for the line.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>word_line</strong> (<em>np.array</em>) – An nx1 array with the x-position of each dot in the rotated coordiate frame.</li>
<li><strong>xy_line</strong> (<em>np.array</em>) – An nx2 array with the non-rotated (x, y) positions of each dot.</li>
<li><strong>text_line</strong> (<em>np.array</em>) – An nx1 array with the text for each dot.</li>
<li><strong>kwargs_cluster</strong> (<em>dict</em>) – A dictionary containing the <cite>eps_*</cite>, <cite>metric</cite>, and <cite>dot_freq</cite> keywords</li>
<li><strong>kwargs_dbscan</strong> (<em>dict</em>) – A dictionary containing all the other DBSCAN keywords</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>clusters_x</strong> (<em>list</em>) – A list with the start and end x-position of the line</li>
<li><strong>clusters_y</strong> (<em>list</em>) – A list with the start and end y-position of the line</li>
<li><strong>clusters_text</strong> (<em>list</em>) – A list-of-lists with the words transcribed at each dot cluster found. One
list per cluster. Note: the empty strings that were added to each annotaiton are
stripped before returning the words.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.angle_metric">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">angle_metric</code><span class="sig-paren">(</span><em>t1</em>, <em>t2</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.angle_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>A metric for the distance between angles in the [-180, 180] range</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>t1</strong> (<em>float</em>) – Theta one in degrees</li>
<li><strong>t2</strong> (<em>float</em>) – Theta two in degrees</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>distance</strong> – The distance between the two input angles in degrees</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.avg_angle">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">avg_angle</code><span class="sig-paren">(</span><em>theta</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.avg_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that finds the avage of an array of angles that are
in the range [-180, 180].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>theta</strong> (<em>array</em>) – An array of angles that are in the range [-180, 180] degrees</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>average</strong> – The average angle</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.cluster_by_gutter">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">cluster_by_gutter</code><span class="sig-paren">(</span><em>x_slope</em>, <em>y_slope</em>, <em>text_slope</em>, <em>kwargs_cluster</em>, <em>kwargs_dbscan</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.cluster_by_gutter" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to take the annotations for each frame of a subject and group them
based on what side of the page gutter they are on.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_slope</strong> (<em>list</em>) – A list-of-lists of the x values for each drawn dot. There is one item in the
list for annotation made by the user.</li>
<li><strong>y_slope</strong> (<em>list</em>) – A list-of-lists of the y values for each drawn dot. There is one item in the
list for annotation made by the user.</li>
<li><strong>text_slope</strong> (<em>list</em>) – A list-of-lists of the text for each drawn dot. There is one item in the
list for annotation made by the user.</li>
<li><strong>kwargs_cluster</strong> (<em>dict</em>) – A dictionary containing the <cite>eps_*</cite>, <cite>metric</cite>, and <cite>dot_freq</cite> keywords</li>
<li><strong>kwargs_dbscan</strong> (<em>dict</em>) – A dictionary containing all the other DBSCAN keywords</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>frame_gutter</strong> – A list of the resulting extractions, one item per line of text found.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.cluster_by_line">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">cluster_by_line</code><span class="sig-paren">(</span><em>xy_rotate</em>, <em>xy_gutter</em>, <em>text_gutter</em>, <em>annotation_labels</em>, <em>kwargs_cluster</em>, <em>kwargs_dbscan</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.cluster_by_line" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to take the annotations for one <cite>slope_label</cite> and cluster them
based on perpendicular distance (e.g. lines of text).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xy_rotate</strong> (<em>np.array</em>) – An array of shape nx2 containing the (x, y) positions of <em>each</em> dot drawn in the
rotate coordiate frame.</li>
<li><strong>xy_gutter</strong> (<em>np.array</em>) – An array of shape nx2 containing the (x, y) positions for <em>each</em> dot drawn.</li>
<li><strong>text_gutter</strong> (<em>np.array</em>) – An array of shape nx1 containing the text for <em>each</em> dot drawn. Note: each
annotation has an empty string added to the end so this array has the same
shape as <cite>xy_slope</cite>.</li>
<li><strong>annotation_labels</strong> (<em>np.array</em>) – An array of shape nx1 containing a unique lable indicating what annotation
each position/text came from.  This information is used to ensure one annotation
does not span multiple lines.</li>
<li><strong>kwargs_cluster</strong> (<em>dict</em>) – A dictionary containing the <cite>eps_*</cite>, <cite>metric</cite>, and <cite>dot_freq</cite> keywords</li>
<li><strong>kwargs_dbscan</strong> (<em>dict</em>) – A dictionary containing all the other DBSCAN keywords</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>frame_lines</strong> – A list of reductions, one for each line. Each reduction is a dictionary
containing the information for the line.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.cluster_by_slope">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">cluster_by_slope</code><span class="sig-paren">(</span><em>x_frame</em>, <em>y_frame</em>, <em>text_frame</em>, <em>slope_frame</em>, <em>kwargs_cluster</em>, <em>kwargs_dbscan</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.cluster_by_slope" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to take the annotations for one <cite>gutter_label</cite> and cluster them
based on what slope the transcription is.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_frame</strong> (<em>list</em>) – A list-of-lists of the x values for each drawn dot. There is one item in the
list for annotation made by the user.</li>
<li><strong>y_frame</strong> (<em>list</em>) – A list-of-lists of the y values for each drawn dot. There is one item in the
list for annotation made by the user.</li>
<li><strong>text_frame</strong> (<em>list</em>) – A list-of-lists of the text for each drawn dot. There is one item in the
list for annotation made by the user. The inner text lists are padded with
an empty string at the end so there is the same number of words as there are
dots.</li>
<li><strong>slope_frame</strong> (<em>list</em>) – A list of the slopes (in deg) for each annotation</li>
<li><strong>kwargs_cluster</strong> (<em>dict</em>) – A dictionary containing the <cite>eps_*</cite>, <cite>metric</cite>, and <cite>dot_freq</cite> keywords</li>
<li><strong>kwargs_dbscan</strong> (<em>dict</em>) – A dictionary containing all the other DBSCAN keywords</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>frame_slope</strong> – A list of the resulting extractions, one item per line of text found.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.cluster_by_word">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">cluster_by_word</code><span class="sig-paren">(</span><em>word_line</em>, <em>xy_line</em>, <em>text_line</em>, <em>annotation_labels</em>, <em>kwargs_cluster</em>, <em>kwargs_dbscan</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.cluster_by_word" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to take the annotations for one line of text and cluster them
based on the words in the line.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>word_line</strong> (<em>np.array</em>) – An nx1 array with the x-position of each dot in the rotated coordiate frame.</li>
<li><strong>xy_line</strong> (<em>np.array</em>) – An nx2 array with the non-rotated (x, y) positions of each dot.</li>
<li><strong>text_line</strong> (<em>np.array</em>) – An nx1 array with the text for each dot.</li>
<li><strong>annotation_labels</strong> (<em>np.array</em>) – An nx1 array with a lable indicating what annotaiton each word belongs to.</li>
<li><strong>kwargs_cluster</strong> (<em>dict</em>) – A dictionary containing the <cite>eps_*</cite>, <cite>metric</cite>, and <cite>dot_freq</cite> keywords</li>
<li><strong>kwargs_dbscan</strong> (<em>dict</em>) – A dictionary containing all the other DBSCAN keywords</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>clusters_x</strong> (<em>list</em>) – A list with the x-position of each dot cluster found</li>
<li><strong>clusters_y</strong> (<em>list</em>) – A list with the y-position of each dot cluster found</li>
<li><strong>clusters_text</strong> (<em>list</em>) – A list-of-lists with the words transcribed at each dot cluster found. One
list per cluster. Note: the empty strings that were added to each annotaiton are
stripped before returning the words.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.consensus_score">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">consensus_score</code><span class="sig-paren">(</span><em>clusters_text</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.consensus_score" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to take clustered text data and return the consensus score</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>clusters_text</strong> (<em>list</em>) – A list-of-lists with length equal to the number of words in a line of text and each
inner list contains the transcriptions for each word.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>consensus_score</strong> – A value indicating the average number of users that agree on the line of text.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.gutter">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">gutter</code><span class="sig-paren">(</span><em>lines_in</em>, <em>tol=0</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.gutter" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster list of input line segments by what side of
the page gutter they are on.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>lines_in</strong> (<em>list</em>) – A list-of-lists containing one line segment per item. Each line
segment should contain only the x-coordinate of each point on the line.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>gutter_index</strong> – A numpy array containing the cluster label for each input line. This label
idicates what side of the gutter(s) the input line segment is on.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/array.html#module-array" title="(in Python v3.7)">array</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.overlap">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">overlap</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>tol=0</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.overlap" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if two line segments overlap</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>list</em>) – A list with the start and end point of the first line segment</li>
<li><strong>y</strong> (<em>lits</em>) – A list with the start and end point of the second line segment</li>
<li><strong>tol</strong> (<em>float</em>) – The tolerance to consider lines overlapping. Default 0, positive
value indicate small overlaps are not considered, negitive values
idicate small gaps are not considered.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>overlap</strong> – True if the two line segments overlap, False otherwise</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.sort_labels">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">sort_labels</code><span class="sig-paren">(</span><em>db_labels</em>, <em>data</em>, <em>reducer=&lt;function mean&gt;</em>, <em>descending=False</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.sort_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that takes in the cluster lables for some data and returns
a sorted (by the original data) list of the unique lables in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>db_labels</strong> (<em>list</em>) – A list of cluster lables, one labele for each data point.</li>
<li><strong>data</strong> (<em>np.array</em>) – The data the lables belong to</li>
<li><strong>reducer</strong> (<em>function (optional)</em>) – The function used to combine the data for each label.  Defualt: np.mean</li>
<li><strong>descending</strong> (<em>bool (optional)</em>) – A flag indicating if the lables should be sorted in descending order.
Default: False</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>lables</strong> – A list of unique cluster lables sorted in either ascending or descending order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.text_utils.tokenize">
<code class="descclassname">panoptes_aggregation.reducers.text_utils.</code><code class="descname">tokenize</code><span class="sig-paren">(</span><em>self</em>, <em>contents</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.text_utils.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize only on space so angle bracket tags are not split</p>
</dd></dl>

<span class="target" id="module-panoptes_aggregation.reducers.sw_variant_reducer"></span><div class="section" id="shakespeares-world-variants-reducer">
<h2>Shakespeares World Variants Reducer<a class="headerlink" href="#shakespeares-world-variants-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module provides a fuction to reduce the <cite>variants</cite> data from
extracts.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.sw_variant_reducer.sw_variant_reducer">
<code class="descclassname">panoptes_aggregation.reducers.sw_variant_reducer.</code><code class="descname">sw_variant_reducer</code><span class="sig-paren">(</span><em>extracts</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.sw_variant_reducer.sw_variant_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce all variants for a subject into one list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>extracts</strong> (<em>list</em>) – A list of extracts created by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.sw_variant_extractor.sw_variant_extractor" title="panoptes_aggregation.extractors.sw_variant_extractor.sw_variant_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.sw_variant_extractor.sw_variant_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>reduction</strong> – A dictionary with at most one key, <cite>variants</cite> with the list of
all variants in the subject</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-panoptes_aggregation.reducers.dropdown_reducer"></span><div class="section" id="dropdown-reducer">
<h2>Dropdown Reducer<a class="headerlink" href="#dropdown-reducer" title="Permalink to this headline">¶</a></h2>
<p>This module porvides functions to reduce the dropdown task extracts from
<a class="reference internal" href="extractros.html#module-panoptes_aggregation.extractors.dropdown_extractor" title="panoptes_aggregation.extractors.dropdown_extractor"><code class="xref py py-mod docutils literal"><span class="pre">panoptes_aggregation.extractors.dropdown_extractor</span></code></a>.</p>
<dl class="function">
<dt id="panoptes_aggregation.reducers.dropdown_reducer.dropdown_reducer">
<code class="descclassname">panoptes_aggregation.reducers.dropdown_reducer.</code><code class="descname">dropdown_reducer</code><span class="sig-paren">(</span><em>votes_list</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.dropdown_reducer.dropdown_reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reducer a list-of-lists of <cite>Counter</cite> objects into one list of dicts</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>votes_list</strong> (<em>list</em>) – A list-of-lists of <cite>Counter</cite> objects from <a class="reference internal" href="#panoptes_aggregation.reducers.dropdown_reducer.process_data" title="panoptes_aggregation.reducers.dropdown_reducer.process_data"><code class="xref py py-meth docutils literal"><span class="pre">process_data()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>reduction</strong> – A dictionary with one key <cite>value</cite> the contains a list of dictionaries
(one for each dropdown in the task) giving the vote count for each <cite>key</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="panoptes_aggregation.reducers.dropdown_reducer.process_data">
<code class="descclassname">panoptes_aggregation.reducers.dropdown_reducer.</code><code class="descname">process_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#panoptes_aggregation.reducers.dropdown_reducer.process_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a list of extracted dropdown answers into <cite>Counter</cite> objects</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>list</em>) – A list of extractions created by
<a class="reference internal" href="extractros.html#panoptes_aggregation.extractors.dropdown_extractor.dropdown_extractor" title="panoptes_aggregation.extractors.dropdown_extractor.dropdown_extractor"><code class="xref py py-meth docutils literal"><span class="pre">panoptes_aggregation.extractors.dropdown_extractor.dropdown_extractor()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>process_data</strong> – A list-of-lists of <cite>Counter</cite> objects. The is one element of the outer list
for each classification made, and one element of the inner list for each
dropdown list in the task.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="extractros.html" title="Extractors"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">panoptes_aggregation 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Coleman Krawczyk.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>